<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jam's Terminal Database</title>
<style>
  body {
    background-color: #253A4B;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    margin: 0; padding: 20px;
  }
  .terminal {
    max-width: 800px;
    margin: auto;
  }
  input[type="text"] {
    width: 100%;
    font-size: 1.2em;
    padding: 10px;
    background: #1b2a3a;
    border: none;
    color: #fff;
    margin-bottom: 15px;
    box-sizing: border-box;
  }
  .category-btns {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  .category-btns button {
    background: none;
    border: none;
    color: #3399ff;
    font-weight: bold;
    cursor: pointer;
    padding: 8px 16px;
    border-radius: 4px;
    transition: background 0.2s;
  }
  .category-btns button.active,
  .category-btns button:hover {
    background: #3399ff;
    color: #253A4B;
  }
  details {
    background: #1b2a3a;
    border-radius: 4px;
    margin-bottom: 10px;
  }
  details[open] > summary {
    background: #3399ff;
    color: #253A4B;
  }
  summary {
    cursor: pointer;
    padding: 10px 15px;
    font-weight: bold;
    list-style: none;
    user-select: none;
    outline: none;
  }
  ul {
    margin: 0; padding: 0 20px 10px 20px;
    list-style: none;
    font-size: 0.95em;
  }
  li {
    padding: 5px 0;
    cursor: default;
    border-bottom: 1px solid #2a4159;
  }
  li:last-child {
    border-bottom: none;
  }
  li:hover {
    background: #2a4159;
  }
  .description {
    margin-top: 5px;
    font-style: italic;
    color: #a3c4ffcc;
  }
  @media (max-width: 500px) {
    .category-btns button {
      flex: 1 1 100%;
      text-align: center;
    }
  }
</style>
</head>
<body>
  <div class="terminal">
    <input type="text" id="searchInput" placeholder="Search..." onkeyup="filterData()" />
    <div class="category-btns">
      <button class="active" data-category="All" onclick="switchCategory(event)">All</button>
      <button data-category="Landmarks" onclick="switchCategory(event)">Landmarks</button>
      <button data-category="Characters" onclick="switchCategory(event)">Characters</button>
      <button data-category="Citizens" onclick="switchCategory(event)">Citizens</button>
    </div>
    <div id="output"></div>
  </div>

<script>
  const data = {
    Landmarks: [
      { name: "Nulight (Prabha - Light)", resident: "Jam-Wise", description: "A serene village bathed in perpetual twilight, known for its bioluminescent flora and fauna. The village's centerpiece is the Lumina Tree, whose glowing branches light up the entire area.", symbol: "Firefly" },
      { name: "Marja’s Eye (Chandra - Moon)", resident: "Hoodie-Jam", description: "A town characterized by its reflective lakes and tranquil atmosphere. The night sky here is always clear, making it a perfect spot for stargazing. The town square features a large, mysterious mirror that locals believe holds the secrets of the moon.", symbol: "Cat" }
    ],
    Characters: [
      { name: "Jam-Wise", category: "Light", description: "Represents wisdom and enlightenment, symbolized by a Firefly." },
      { name: "Hoodie-Jam", category: "Moon", description: "Reflects introspection, emotion, and subtlety, symbolized by a Cat." }
    ],
    Citizens: [
      { name: "Spoon", age: 3, species: "Cavoodle", owner: "Jam & Elaine" },
      { name: "Elaine", role: "Fiancé", hobbies: "Supporting Jam" }
    ]
  };

  let currentCategory = "All";

  function createItemHTML(item, category) {
    let extra = "";
    if (category === "Landmarks") {
      extra = `<div class="description">${item.description} <br><b>Resident:</b> ${item.resident} | <b>Symbol:</b> ${item.symbol}</div>`;
    } else if (category === "Characters") {
      extra = `<div class="description">${item.description} | <b>Category:</b> ${item.category}</div>`;
    } else if (category === "Citizens") {
      extra = `<div class="description">${Object.entries(item).filter(([k]) => k !== "name").map(([k,v]) => `<b>${k}:</b> ${v}`).join(" | ")}</div>`;
    }
    return `<li><strong>${item.name}</strong>${extra}</li>`;
  }

  function renderCategory(category, filter = "") {
    const container = document.getElementById("output");
    let content = "";

    if (category === "All") {
      for (const cat in data) {
        let filteredItems = data[cat].filter(item =>
          item.name.toLowerCase().includes(filter.toLowerCase()) ||
          (item.description && item.description.toLowerCase().includes(filter.toLowerCase())) ||
          Object.values(item).some(v => typeof v === 'string' && v.toLowerCase().includes(filter.toLowerCase()))
        );
        if (filteredItems.length === 0) continue;
        content += `<details open><summary>${cat}</summary><ul>`;
        filteredItems.forEach(item => {
          content += createItemHTML(item, cat);
        });
        content += "</ul></details>";
      }
    } else {
      let filteredItems = data[category].filter(item =>
        item.name.toLowerCase().includes(filter.toLowerCase()) ||
        (item.description && item.description.toLowerCase().includes(filter.toLowerCase())) ||
        Object.values(item).some(v => typeof v === 'string' && v.toLowerCase().includes(filter.toLowerCase()))
      );
      if (filteredItems.length === 0) {
        content = `<p>No results found.</p>`;
      } else {
        content = `<details open><summary>${category}</summary><ul>`;
        filteredItems.forEach(item => {
          content += createItemHTML(item, category);
        });
        content += "</ul></details>";
      }
    }

    container.innerHTML = content;
  }

  function switchCategory(event) {
    currentCategory = event.target.getAttribute("data-category");
    document.querySelectorAll(".category-btns button").forEach(btn => btn.classList.remove("active"));
    event.target.classList.add("active");
    const filterVal = document.getElementById("searchInput").value;
    renderCategory(currentCategory, filterVal);
  }

  function filterData() {
    const filterVal = document.getElementById("searchInput").value;
    renderCategory(currentCategory, filterVal);
  }

  // Initial render
  renderCategory("All");
</script>
</body>
</html>
